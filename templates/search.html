{% extends "base.html" %}

{% block title %}Search Results - Website Organizer{% endblock %}

{% block content %}
<div class="page">
    <h1>ğŸ” Search Results</h1>
    
    {% if query %}
    <p>Showing results for: <strong>"{{ query }}"</strong></p>

    {% if emails %}
    <div class="section">
        <h2>ğŸ“§ Email IDs ({{ emails|length }})</h2>
        <div class="email-list">
            {% for email in emails %}
            <div class="email-item">
                <div class="email-content">
                    <h3>{{ email.email }}</h3>
                    <p>{{ email.purpose }}</p>
                </div>
                <a href="/websites/{{ email.id }}" class="btn btn-sm">View</a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if websites %}
    <div class="section">
        <h2>ğŸŒ Websites ({{ websites|length }})</h2>
        <div class="website-grid">
            {% for website in websites %}
            <div class="website-card">
                <h3>{{ website.name }}</h3>
                <a href="{{ website.url }}" target="_blank">{{ website.url }}</a>
                <p>Email: {{ website.email_account.email }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if submissions %}
    <div class="section">
        <h2>ğŸ“ Submissions ({{ submissions|length }})</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Website</th>
                    <th>Due Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for sub in submissions %}
                <tr>
                    <td>{{ sub.title }}</td>
                    <td>{{ sub.website.name }}</td>
                    <td>{{ sub.due_date.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td><span class="badge badge-{{ sub.status }}">{{ sub.status }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    {% if not emails and not websites and not submissions %}
    <div class="empty-state">
        <h3>No results found</h3>
        <p>Try searching with different keywords</p>
    </div>
    {% endif %}

    {% else %}
    <div class="empty-state">
        <h3>Enter a search query</h3>
        <p>Use the search box in the navigation bar</p>
    </div>
    {% endif %}
</div>
{% endblock %}
